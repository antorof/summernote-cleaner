!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(window.jQuery)}(function(e){e.extend(!0,e.summernote.lang,{"en-US":{cleaner:{tooltip:"Cleaner",not:"Text has been Cleaned!!!",limitText:"Text",limitHTML:"HTML"}}}),e.extend(e.summernote.options,{cleaner:{action:"both",newline:"",showNotification:!0,notStyle:"position:absolute;top:0;left:0;right:0",icon:'<i class="note-icon"><svg xmlns="http://www.w3.org/2000/svg" id="libre-paintbrush" viewBox="0 0 14 14" width="14" height="14"><path d="m 11.821425,1 q 0.46875,0 0.82031,0.311384 0.35157,0.311384 0.35157,0.780134 0,0.421875 -0.30134,1.01116 -2.22322,4.212054 -3.11384,5.035715 -0.64956,0.609375 -1.45982,0.609375 -0.84375,0 -1.44978,-0.61942 -0.60603,-0.61942 -0.60603,-1.469866 0,-0.857143 0.61608,-1.419643 l 4.27232,-3.877232 Q 11.345985,1 11.821425,1 z m -6.08705,6.924107 q 0.26116,0.508928 0.71317,0.870536 0.45201,0.361607 1.00781,0.508928 l 0.007,0.475447 q 0.0268,1.426339 -0.86719,2.32366 Q 5.700895,13 4.261155,13 q -0.82366,0 -1.45982,-0.311384 -0.63616,-0.311384 -1.0212,-0.853795 -0.38505,-0.54241 -0.57924,-1.225446 -0.1942,-0.683036 -0.1942,-1.473214 0.0469,0.03348 0.27455,0.200893 0.22768,0.16741 0.41518,0.29799 0.1875,0.130581 0.39509,0.24442 0.20759,0.113839 0.30804,0.113839 0.27455,0 0.3683,-0.247767 0.16741,-0.441965 0.38505,-0.753349 0.21763,-0.311383 0.4654,-0.508928 0.24776,-0.197545 0.58928,-0.31808 0.34152,-0.120536 0.68974,-0.170759 0.34821,-0.05022 0.83705,-0.07031 z"/></svg></i>',keepHtml:!0,keepOnlyTags:[],keepClasses:!1,badTags:["style","script","applet","embed","noframes","noscript"],badAttributes:["style","start"],limitChars:0,limitDisplay:"both",limitStop:!1}}),e.extend(e.summernote.plugins,{cleaner:function(t){var a=e.summernote.ui,n=t.layoutInfo.note,r=t.layoutInfo.editor,o=t.options,l=o.langInfo;o.cleaner=e.extend({},e.summernote.options.cleaner,o.cleaner),console.warn("comm",o.cleaner);var i=function(e,t){var a=e;if(!o.cleaner.keepClasses){var n=/(\n|\r| class=(")?Mso[a-zA-Z]+(")?)/g;a=e.replace(n," ")}var r=/(\n)+/g;if(a=a.replace(r,t),o.cleaner.keepHtml){var l=new RegExp("\x3c!--(.*?)--\x3e","gi");a=a.replace(l,"");var i=new RegExp("<(/)*(meta|link|\\?xml:|st1:|o:|font)(.*?)>","gi");a=a.replace(i,"");for(var s=o.cleaner.badTags,c=0;c<s.length;c++)i=new RegExp("<"+s[c]+"\\b.*>.*</"+s[c]+">","gi"),a=a.replace(i,"");var u=o.cleaner.keepOnlyTags;if(void 0===u&&(u=[]),u.length>0){u=(((u||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var p=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;a=a.replace(p,function(e,t){return u.indexOf("<"+t.toLowerCase()+">")>-1?e:""})}for(var d=o.cleaner.badAttributes,m=0;m<d.length;m++){var g=new RegExp(" "+d[m]+"=['|\"](.*?)['|\"]","gi");a=a.replace(g,"")}}return a};"both"!=o.cleaner.action&&"button"!=o.cleaner.action||t.memo("button.cleaner",function(){return a.button({contents:o.cleaner.icon,tooltip:l.cleaner.tooltip,container:"body",click:function(){n.summernote("createRange").toString()?n.summernote("pasteHTML",n.summernote("createRange").toString()):n.summernote("code",i(n.summernote("code"))),o.cleaner.showNotification&&(r.find(".note-status-output").length>0?r.find(".note-status-output").html('<div class="alert alert-success">'+l.cleaner.not+"</div>"):r.find(".note-editing-area").append('<div class="alert alert-success" style="'+o.cleaner.notStyle+'">'+l.cleaner.not+"</div>"))}}).render()}),this.events={"summernote.init":function(){if(r.find(".note-status-output").length<1&&(r.find(".note-statusbar").prepend('<output class="note-status-output"></output>'),e("head").append("<style>.note-statusbar .note-status-output{display:block;padding-top:7px;width:100%;font-size:14px;line-height:1.42857143;height:25px;color:#000}.note-statusbar .pull-right{float:right!important}.note-statusbar .note-status-output .text-muted{color:#777}.note-statusbar .note-status-output .text-primary{color:#286090}.note-statusbar .note-status-output .text-success{color:#3c763d}.note-statusbar .note-status-output .text-info{color:#31708f}.note-statusbar .note-status-output .text-warning{color:#8a6d3b}.note-statusbar .note-status-output .text-danger{color:#a94442}.note-statusbar .alert{margin:-7px 0 0 0;padding:2px 10px;border:1px solid transparent;border-radius:0}.note-statusbar .alert .note-icon{margin-right:5px}.note-statusbar .alert-success{color:#3c763d!important;background-color: #dff0d8 !important;border-color:#d6e9c6}.note-statusbar .alert-info{color:#31708f;background-color:#d9edf7;border-color:#bce8f1}.note-statusbar .alert-warning{color:#8a6d3b;background-color:#fcf8e3;border-color:#faebcc}.note-statusbar .alert-danger{color:#a94442;background-color:#f2dede;border-color:#ebccd1}</style>")),0!=o.cleaner.limitChars||"none"!=o.cleaner.limitDisplay){var t=r.find(".note-editable").text().replace(/(<([^>]+)>)/gi,"").replace(/( )/," "),a=r.find(".note-editable").html(),n="";t.length>o.cleaner.limitChars&&o.cleaner.limitChars>0?n+='text-danger">':n+='">',"text"!=o.cleaner.limitDisplay&&"both"!=o.cleaner.limitDisplay||(n+=l.cleaner.limitText+": "+t.length),"both"==o.cleaner.limitDisplay&&(n+=" / "),"html"!=o.cleaner.limitDisplay&&"both"!=o.cleaner.limitDisplay||(n+=l.cleaner.limitHTML+": "+a.length),r.find(".note-status-output").html('<small class="pull-right '+n+"&nbsp;</small>")}},"summernote.keydown":function(t,a){if(0!=o.cleaner.limitChars||"none"!=o.cleaner.limitDisplay){var n=r.find(".note-editable").text().replace(/(<([^>]+)>)/gi,"").replace(/( )/," "),i=r.find(".note-editable").html(),s="";if(1==o.cleaner.limitStop&&n.length>=o.cleaner.limitChars){var c=a.keyCode;if(allowed_keys=[8,37,38,39,40,46],-1!=e.inArray(c,allowed_keys))return r.find(".cleanerLimit").removeClass("text-danger"),!0;r.find(".cleanerLimit").addClass("text-danger"),a.preventDefault(),a.stopPropagation()}else n.length>o.cleaner.limitChars&&o.cleaner.limitChars>0?s+='text-danger">':s+='">',"text"!=o.cleaner.limitDisplay&&"both"!=o.cleaner.limitDisplay||(s+=l.cleaner.limitText+": "+n.length),"both"==o.cleaner.limitDisplay&&(s+=" / "),"html"!=o.cleaner.limitDisplay&&"both"!=o.cleaner.limitDisplay||(s+=l.cleaner.limitHTML+": "+i.length),r.find(".note-status-output").html('<small class="cleanerLimit pull-right '+s+"&nbsp;</small>")}},"summernote.paste":function(e,t){if("both"==o.cleaner.action||"paste"==o.cleaner.action){t.preventDefault();var a=window.navigator.userAgent.indexOf("MSIE ");a=a>0||!!navigator.userAgent.match(/Trident.*rv\:11\./);var s=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;if(a)c=window.clipboardData.getData("Text");else if(o.cleaner.keepHtml)(c=t.originalEvent.clipboardData.getData("text/html"))||(c=t.originalEvent.clipboardData.getData("Text"));else var c=t.originalEvent.clipboardData.getData("text/plain");c&&(a||s?setTimeout(function(){n.summernote("pasteHTML",i(c,o.cleaner.newline))},1):n.summernote("pasteHTML",i(c,o.cleaner.newline)),o.cleaner.showNotification&&(r.find(".note-status-output").length>0?r.find(".note-status-output").html('<div class="summernote-cleanerAlert alert alert-success">'+l.cleaner.not+"</div>"):r.find(".note-resizebar").append('<div class="summernote-cleanerAlert alert alert-success" style="'+o.cleaner.notStyle+'">'+l.cleaner.not+"</div>")))}}}}})});